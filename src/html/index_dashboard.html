<style lang="scss">
.progress {
	width: 80px;
  height: 80px;
	background: #FFFFFF;
	  --progress-value: .3243;
	  --color: hsl(calc(240 * (1 - var(--progress-value))), 100%, calc(30% + 20% * var(--progress-value)));
	}
.circle-progress {
  width: 80px;
  height: 80px;
	background: #FFFFFF;
}
.circle-progress-value {
  stroke-width: 6px;
  stroke: var(--color);
  stroke-dasharray: 5.98 2;
  transition: stroke .4s;
}
.circle-progress-circle {
  stroke-width: 6px;
  stroke: rgba(0,0,0,.03);
}
.circle-progress-text {
  font-weight: bold;
  fill: var(--color);
  transform: translateX(0.2em);
  transition: fill .4s;
}
</style>
	<div class="card-deck mb-3">
			<div class="card shadow-sm mb-3">
					<div class="card-header text-center">
							<strong set-lan="html:Network Stats"></strong>
					</div>
					<div class="card-body text-secondary">
						<div class="row text-center mt-3">
							<div class="col-6"><span set-lan="html:Block Height"></span><h6 class="mt-2 text-success" id="Total_Blocks"></h6></div>
							<div class="col-6"><span set-lan="html:Block Time"></span><h6 class="mt-2 text-success" id="Block_Time"></h6></div>
						</div>
						<div class="row mt-3 pt-3 ">
							<div class="col-6">
								<div class="progress float-right"></div>
							</div>
							<div class="col-6 align-self-center">
								<div class="mb-2"><span class="text-success" style="font-size:18px;" id="epoc_no"></span> th <span set-lan="html:Epoch"></span></div>
								<h6 class="text-success" id="Epoc_End_Time">
									- <small class="text-muted"> h </small>
									- <small class="text-muted"> m </small>
									- <small class="text-muted"> s </small>
								</h6>
								<span set-lan="html:Until Epoch End"></span>
							</div>
						</div>

						<div class="row mt-4 pt-4 text-success" id="miner_panel" style="cursor: pointer;height:100px;">
							<div class="col-4 align-self-center">
								<div class="float-right" id="group_logo"></div>
							</div>
							<div class="col-8 align-self-center" id="group_name"></div>
						</div>

						<div class="w-100 mt-3 pt-3"><hr/></div>
						<div class="row mt-3 pt-3">
							<div class="align-self-center text-center col-6">
								<div><span set-lan="html:Groups"></span></div><br/>
								<div class='text-success'><h6 id="groups"></h6></div>
								<div set-lan="html:Elected/Registered"></div>
								<div ></div>
							</div>
							<div class="align-self-center text-center col-6">
								<div><span  set-lan="html:Validators"></span></div><br/>
								<div class='text-success'><h6 id="validators"></h6></div>
								<div set-lan="html:Elected/Registered"></div>
							</div>
						</div>
						<div class="w-100 mt-3 pt-3"><hr/></div>
						<!-- -->
						<div class="row  mt-3 pt-3">
							<div class="col-6 text-center">
								<div set-lan="html:Locked CELO"></div>
								<h6 class='mt-3 text-success' id="locked_cGLD"></h6>
								<span class="text-success" id="locked_rate"></span>
								<i class="iconfont iconcircle_help text-success" style="cursor: pointer;"
								 data-toggle="tooltip" data-placement="right" data-type="success" title="* LockedCELO Rate = LockedCELO / TotalSupplyCELO;"></i>

							</div>
							<div class="col-6 text-center">
								<div set-lan="html:Votes"></div>
								<h6 class="mt-3 text-success" id="votes"></h6>
								<span class="text-success" id="votes_rate"></span>
								<i class="iconfont iconcircle_help text-success" style="cursor: pointer;"
								 data-toggle="tooltip" data-placement="right" data-type="success" title="* Votes Rate = Votes / TotalSupplyCELO;"></i>

							</div>
						</div>
						<div class="row mt-3 pt-3 align-self-center">
							<div class="col-8 text-secondary" set-lan="html:Epoch Votes/Locked CELO"></div>
							<div class="col-4 text-right">
								<div class="btn-group btn-group-toggle bg-light btn-group-sm" data-toggle="buttons" style="height:24px;width:60px;">
									<button class="btn btn-sm btn-outline-success pt-0 active" onclick="javascript:drawLockedGoldChart(0);return false;">
										<input type="radio" data-toggle="button" checked hidden><i class="iconfont icontrending-up" style="font-size:16px;"></i>
								  </button>
								  <button class="btn btn-sm btn-outline-success pt-0" onclick="javascript:drawLockedGoldChart(1);return false;">
										<input type="radio" data-toggle="button" hidden><i class='iconfont iconmore_line p-0' style="font-size:12px;"></i>
								  </button>
								</div>
							</div>
						</div>
						<div class="pt-3" id="curve_chart_lockedgold" style="width: 100%; height: 150px;"></div>
				</div>
			</div>
			<!-- -->
			<div class="card shadow-sm mb-3">
				<div class="card-header text-center">
						<strong set-lan="html:Supply"></strong>
				</div>
				<div class="card-body text-secondary">
					<div class="text-center mt-3" set-lan="html:Allocated Supply"></div>
					<div class="row pt-3">
						<div class="align-self-center text-center col-6">
							<div class="mb-2"><span>CELO</span></div>
							<div class="text-success"><h6 id="cGLD_totalSupply"></h6></div>
						</div>
						<div class="align-self-center text-center col-6">
							<div class="mb-2"><span>cUSD</span></div>
							<div class="text-success"><h6 id="cUSD_totalSupply"></h6></div>
						</div>
					</div>
					<div class="text-center">
						<i style="font-size:8pt;"><span set-lan="html:Circulating supply based on the"></span>
						<span class="text-primary" style="cursor: pointer;"  onclick="window.open(thecelohost+'/?tab=cgld_release');" set-lan="html:model"></span></i>
					</div>
					<div class="w-100 mt-3 pt-3"><hr/></div>
					<div class="text-center mt-3 pt-3" set-lan="html:Incremental Supply"></div>
					<div class="row mt-3 text-success">
						<div class="text-center col-6">
							<div class="mb-2"><span class="text-secondary">CELO</span></div>
							<h6 id="release_cgld"></h6>
							<strong id="release_cgld_rate"></strong>
							<i class="iconfont iconcircle_help" style="cursor: pointer;"
							 data-toggle="tooltip" data-placement="right" data-type="success"
							 title="* Incremental Supply CELO = ((Current Epoch TotalSupply CELO) - (1st Epoch TotalSupply CELO)) / (1st Epoch TotalSupply CELO)"></i>
						</div>
						<div class="text-center col-6">
							<div class="mb-2"><span class="text-secondary">cUSD</span></div>
							<h6 id="release_cusd"></h6>
							<strong id="release_cusd_rate"></strong>
							<i class="iconfont iconcircle_help" style="cursor: pointer;" data-toggle="tooltip" data-placement="right" data-type="success" title="* Incremental Supply cUSD = ((Current Epoch TotalSupply cUSD) - (1st Epoch TotalSupply cUSD)) / (1st Epoch TotalSupply cUSD)"></i>
						</div>
					</div>
					<!-- -->
					<div class="text-center mt-3 pt-3" set-lan="html:Inflation (Year)"></div>
					<div class="row mt-3 text-success">
						<div class="text-center col-6">
							<div class="mb-2"><span class="text-secondary">CELO</span></div>
							<h6 id="release_cgld_inflation"></h6>
						</div>
						<div class="text-center col-6">
							<div class="mb-2"><span class="text-secondary">cUSD</span></div>
							<h6 id="release_cusd_inflation"></h6>
						</div>
					</div>
					<!-- -->
					<div class="row mt-3 pt-3 align-self-center">
						<div class="col-8 text-secondary" set-lan="html:Epoch Incremental Supply"></div>
						<div class="col-4 text-right">
							<div class="btn-group btn-group-toggle bg-light btn-group-sm" data-toggle="buttons" style="height:24px;width:60px;">
								<label class="btn btn-sm btn-outline-success active pt-0" onclick="javascript:drawSupplyChart(0);return false;">
									<input type="radio" data-toggle="button" checked hidden><i class="iconfont icontrending-up" style="font-size:16px;"></i>
							  </label>
							  <label class="btn btn-sm btn-outline-success pt-0" onclick="javascript:drawSupplyChart(1);return false;">
									<input type="radio" data-toggle="button" hidden><i class='iconfont iconmore_line' style="font-size:12px;"></i>
							  </label>
							</div>
						</div>
					</div>
					<div class="pt-3" id="curve_chart_supply" style="width: 100%; height: 150px;"></div>
					<div class="w-100 mt-3 pt-3"><hr/></div>
					<div class="text-center mt-3 pt-3" set-lan="html:Address/Transfers"></div>
					<div class="row mt-3">
						<div class="align-self-center text-center col-6">
							<div class="mb-2"><span>CELO</span></div>
							<div><h6 id="cGLD_addresses_transfers" class='text-success'></h6></div>
						</div>
						<div class="align-self-center text-center col-6">
							<div class="mb-2"><span>cUSD</span></div>
							<div class='text-success'><h6 id="cUSD_addresses_transfers"></h6></div>
						</div>
					</div>
				</div>
			</div>
			<!-- -->
			<div class="card shadow-sm mb-3">
				<div class="card-header text-center">
						<strong set-lan="html:Economics"></strong>
				</div>
				<div class="card-body text-center mt-3 text-secondary">
					<div class="text-center">
						<h6 class="text-success" id="cGLD_Price"></h6> <span set-lan="html:USDT/CELO"></span><br/> <cite style="font-size:8pt;"> Bittrex</cite>
					</div>
					<div id="curve_chart_prices" style="width: 100%; height: 120px;"></div>
					<div class="w-100 mt-3 pt-3"><hr/></div>
					<!--  https://medium.com/celoorg/the-celo-reserve-faqs-f3f7cbb1991f -->
					<div class="text-center mt-3 pt-3"><span set-lan="html:Reserve Infomation"></span><i> <a href="https://medium.com/celoorg/the-celo-reserve-faqs-f3f7cbb1991f"> FAQs</a></i></div>
					<div class="text-center mt-3 row">
						<div class="col-6 text-success">
							<div class="mb-2 text-secondary">CELO<small><br/>(Current Reserve Holdings)</small></div>
							<div class="mb-2">
								<small>Frozen: </small><span id="frozen_celo" style="font-size:16px"></span><br/>
								<small>Unfrozen: </small><span id="unfrozen_celo" style="font-size:16px"></span>
							</div>
							<div id="reserve_celo_addr_1"></div>
						</div>
						<div class="col-6 text-success">
							<div class="mb-2 text-secondary">CELO<small><br/>(In Custody)</small></div>
							<div class="mb-2"><h6 id="custody_celo"></h6></div>
							<div id="reserve_celo_addr_2"></div>
						</div>
					</div>
					<div class="text-center mt-3 pt-3"><span set-lan="html:CELO & additional cryptoassets"></span></div>
					<div class="mt-3 pt-3 row">
						<div class="text-center text-success col-6">
							<div class="mb-2"><span class="text-secondary"  set-lan="html:Unfrozen CELO"></span>
								<i id="reserve_celo_tooltip" class="iconfont iconcircle_help" style="cursor: pointer;"
								 data-toggle="tooltip" data-placement="right" data-type="success"></i>
							</div>
							<h6 id="unfrozen_celo_1"></h6>
							<span id="unfrozen_celo_1_rate"></span>
						</div>
						<div class="text-center text-success col-6">
							<div class="mb-2"><span class="text-secondary">BTC</span>
								<i id="reserve_btc_tooltip" class="iconfont iconcircle_help" style="cursor: pointer;"
								 data-toggle="tooltip" data-placement="right" data-type="success"></i>
							</div>
							<h6 id="reserve_btc"></h6>
							<span id="reserve_btc_rate"></span>
							<div id="reserve_btc_addr"></div>
						</div>
					</div>
					<div id="chart-reserve-info" style="height:130px"></div>
					<div class="pt-3 row">
						<div class="text-center text-success col-6">
							<div class="mb-2"><span class="text-secondary">ETH</span>
								<i id="reserve_eth_tooltip" class="iconfont iconcircle_help" style="cursor: pointer;"
								 data-toggle="tooltip" data-placement="right" data-type="success"></i>
							 </div>
							<h6 id="reserve_eth"></h6>
							<span id="reserve_eth_rate"></span>
							<div id="reserve_eth_addr"></div>
						</div>
						<div class="text-center text-success col-6">
							<div class="mb-2"><span class="text-secondary">DAI</span>
								<i id="reserve_dai_tooltip" class="iconfont iconcircle_help" style="cursor: pointer;"
								 data-toggle="tooltip" data-placement="right" data-type="success"></i>
							</div>
							<h6 id="reserve_dai"></h6>
							<span id="reserve_dai_rate"></span>
							<div id="reserve_dai_addr"></div>
						</div>
					</div>
					<!--
					<div class='text-right text-secondary mt-3' style="font-size:8pt;"><i set-lan="html:* It is calculated by assuming"></i> <span class="text-success">1cUSD=1USDT=1DAI=1$</span></div>
					 -->
				</div>
			</div>
	</div>
<script src='/js/circle-progress.js'></script>
<script type="text/javascript">
	//
	var dataPricesTable;
	function drawPricesChart() {
		if(dataPricesTable){
			var options = {
				lineWidth:3,
				tooltip: {isHtml: true},
				series: {
					0: { color: options_googlechart.slices[0].color },
					1: { color: options_googlechart.slices[1].color }
				},
				hAxis: {showTextEvery:dataPricesTable.getNumberOfRows()-1,textStyle : {color: '#6c757d',fontSize : 10}},
				vAxis:{
					title:'CELO | USDT',
					titleTextStyle:{fontSize:8},
					baselineColor:'transparent',
					gridlines:{color:'transparent'},
					viewWindow: {min:dataPricesTable.getColumnRange(1).min,max:dataPricesTable.getColumnRange(4).max}
				},
				/*
				candlestick: {
          fallingColor: { strokeWidth: 0, fill: '#a52714' }, // red
          risingColor: { strokeWidth: 0, fill: '#0f9d58' }   // green
        },
				*/
				//curveType: 'function',
				legend: 'none',
				chartArea:{left:10,top:10,bottom:20,right:20,width:"100%",height:100}
			};
			var chart = new google.visualization.CandlestickChart(document.getElementById('curve_chart_prices'));
			//var chart = new google.visualization.LineChart(document.getElementById('curve_chart_prices'));
			chart.draw(dataPricesTable, options);
		}
	}
	//
	var dataTable ;
	var old_dataTable_flg = 0;
	function drawLockedGoldChart(flg) {
		if(dataTable){
			if(flg==0){
				var options = {lineWidth:3,tooltip: {isHtml: true},
					series: {0: { color: options_googlechart.slices[0].color },1: { color: options_googlechart.slices[1].color }},
					hAxis: {showTextEvery:dataTable.getNumberOfRows()-1,textStyle : {color: '#6c757d',fontSize : 10}},
					vAxis:{
						title:'CELO',
						baselineColor:'transparent',
						gridlines:{color:'transparent'},
						viewWindow: {min:0}
					},
					curveType: 'function',
					legend: {position: 'bottom',alignment:'center',textStyle:{"color":"#6ccd86","fontSize":12}},
					chartArea:{left:10,top:10,bottom:60,right:20,width:"100%",height:"100"}
				};
				var chart = new google.visualization.LineChart(document.getElementById('curve_chart_lockedgold'));
				chart.draw(dataTable, options);
			}
			else{
				var table_html = '<div class="table-responsive"><table class="table table-fixed table-sm table-borderless"><thead><tr class="text-secondary">';
				table_html += '<th scope="col" class="col-2 text-left">'+dataTable.getColumnLabel(0)+'</th>';
				table_html += '<th scope="col" class="col-5 text-right">'+dataTable.getColumnLabel(1)+'</th>';
				table_html += '<th scope="col" class="col-5 text-right">'+dataTable.getColumnLabel(3)+'</th>';
      	table_html += '</tr></thead><tbody>';
				//<tr>
				var len = dataTable.getNumberOfRows();
				for (var i = len-1; i >=0; i--) {
					table_html += '<tr class="text-success">';
	      	table_html += '<td scope="row" class="col-2">'+dataTable.getFormattedValue(i, 0)+'</td>';
	      	table_html += '<td class="col-5 text-right">'+dataTable.getFormattedValue(i, 1)+'</td>';
	      	table_html += '<td class="col-5 text-right">'+dataTable.getFormattedValue(i, 3)+'</td>';
	      	table_html += '</tr>';
				}
      	table_html += '</tbody></table></div>';
				//
				$('#curve_chart_lockedgold').empty();
				$('#curve_chart_lockedgold').html(table_html);
			}
		}
		old_dataTable_flg = flg;
	}
	//
	var dataSupplyTable;
	var old_dataSupplyTable_flg = 0;
	function drawSupplyChart(flg) {
		if(dataSupplyTable){
			if(flg==0){
				var options = {
					lineWidth:3,
					series: {0: { color: options_googlechart.slices[0].color },1: { color: options_googlechart.slices[1].color }},
					hAxis: {showTextEvery:dataSupplyTable.getNumberOfRows()-1,textStyle : {color: '#6c757d',fontSize : 10}},
					vAxis:{title:'CELO|cUSD',baselineColor:'transparent',gridlines:{color:'transparent'},viewWindow: {min:0}},
					curveType: 'function',
					legend: {position: 'bottom',alignment:'center',textStyle:{"color":"#6ccd86","fontSize":12}},
					chartArea:{left:10,top:10,bottom:50,right:20,width:"100%",height:"100"}
				};
				//
				var chart = new google.visualization.LineChart(document.getElementById('curve_chart_supply'));
				chart.draw(dataSupplyTable, options);
			}
			else{
				var table_html = '<div class="table-responsive"><table class="table table-fixed table-sm table-borderless"><thead><tr class="text-secondary">';
				table_html += '<th scope="col" class="col-2 text-left">'+dataSupplyTable.getColumnLabel(0)+'</th>';
				table_html += '<th scope="col" class="col-5 text-right">'+dataSupplyTable.getColumnLabel(1)+'</th>';
				table_html += '<th scope="col" class="col-5 text-right">'+dataSupplyTable.getColumnLabel(2)+'</th>';
      	table_html += '</tr></thead><tbody>';
				//<tr>
				var len = dataSupplyTable.getNumberOfRows();
				for (var i = len-1; i >=0; i--) {
					table_html += '<tr class="text-success">';
	      	table_html += '<td scope="row" class="col-2">'+dataSupplyTable.getFormattedValue(i, 0)+'</td>';
	      	table_html += '<td class="col-5 text-right">'+dataSupplyTable.getFormattedValue(i, 1)+'</td>';
	      	table_html += '<td class="col-5 text-right">'+dataSupplyTable.getFormattedValue(i, 2)+'</td>';
	      	table_html += '</tr>';
				}
      	table_html += '</tbody></table></div>';
				//
				$('#curve_chart_supply').empty();
				$('#curve_chart_supply').html(table_html);
			}
		}
		old_dataSupplyTable_flg = flg;
	}
	/////////////////////////////
	$(window).resize(function(){
		if(navbar_tab == 'dashboard'){
			google.charts.setOnLoadCallback(drawPricesChart);
			google.charts.setOnLoadCallback(function(){drawLockedGoldChart(old_dataTable_flg);});
			google.charts.setOnLoadCallback(function(){drawSupplyChart(old_dataSupplyTable_flg);});
			google.charts.setOnLoadCallback(draw_reserve_chart);
		}
	});
	//
	var timer_num = 0;
	var Total_Blocks = 0;
	var Epoch_Size = 17280;
	var Blocks_until_Epoch = 0;
	var Average_Block_Time = 0;
	var Block_Time = 0;
	//
	var circleProgress = new CircleProgress('.progress', {
		max: Epoch_Size,
		value: 0,
		startAngle: 0,
		clockwise: 1,
		startAngle: 180,
		animationDuration: 400,
		//textFormat: (val) => val + 'Epoch',
		textFormat: 'vertical'
	});
	/////////////////////////////
	function getBlockData(){
		/////////////////////////////
		$(function(){
				$.ajax({
						url: thecelohost+'/api/v0.1.js?method=dashboard',
						type: 'GET',
						cache: false,
						dataType:'text',
						success:function(data,result){
							var obj = JSON.parse(data);
							var dashboard = obj.dashboard;
							Epoch_Size = dashboard[3];
							Blocks_until_Epoch = dashboard[2];
							Average_Block_Time = dashboard[1];
							var block_height = parseInt(dashboard[0], 16);
							if(block_height > Total_Blocks){
								//
								//Average Block Time
								$("#Block_Time").html(Block_Time+'<small class="text-muted">s</small>');//
								//alert(timestamp);
								$('#timespan').html('');
								//$('#timespan').html(timeSpan(timestamp));
								//Total Transactions
								$("#Total_Transactions").html(thousands(dashboard[4]));
								//Gas Price
								$("#Gas_Price").html(thousands(dashboard[5])+'<small class="text-muted">wei</small>');
								//Active Nodes
								$("#Active_Nodes").html(thousands(dashboard[9]));
								//groups
								$("#groups").html(dashboard[10]+'/'+dashboard[11]);
								//validators
								$("#validators").html(dashboard[12]+'/'+dashboard[13]);
								//
								Total_Blocks = block_height;
								//Total Blocks
								$("#Total_Blocks").html(thousands(Total_Blocks));
								Blocks_until_Epoch =  Total_Blocks%Epoch_Size;
								circleProgress['value']=Blocks_until_Epoch;
								//
								var epoc_end_seconds = (Epoch_Size-Blocks_until_Epoch) * 5;
								var hours = parseInt(epoc_end_seconds / 3600);
								var minutes = parseInt((epoc_end_seconds % 3600) / 60);
								var seconds = parseInt(epoc_end_seconds % 60);
								var Epoc_End_Time = hours+'<small class="text-muted"> h</small> ';
								Epoc_End_Time += minutes+'<small class="text-muted"> m</small> ';
								Epoc_End_Time += seconds+'<small class="text-muted"> s</small>';
								$("#Epoc_End_Time").html(Epoc_End_Time);
								//
								$("#epoc_no").html(parseInt(Total_Blocks/Epoch_Size)+1);
								timer_num = 0;
								//totalSupply
								var cGLD_totalSupply = dashboard[14];
								$("#cGLD_totalSupply").html(thousands(cGLD_totalSupply.toFixed(0)));
								var cUSD_totalSupply = dashboard[17];
								$("#cUSD_totalSupply").html(thousands(cUSD_totalSupply.toFixed(0)));
								//cGLD_addresses/cGLD_transfers
								var cGLD_addresses = dashboard[15];
								var cGLD_transfers = dashboard[16];
								$("#cGLD_addresses_transfers").html(thousands(cGLD_addresses)+'/'+thousands(cGLD_transfers));
								//cUSD_addresses/cUSD_transfers
								var cUSD_addresses = dashboard[18];
								var cUSD_transfers = dashboard[19];
								$("#cUSD_addresses_transfers").html(thousands(cUSD_addresses)+'/'+thousands(cUSD_transfers));
								//
								$('#miner_panel').fadeOut(300,function(){
										let group_link = 'onclick="javascript:window.location.href=\''+thecelohost+'/group/'+dashboard[20]+'\'"';
										//logo
										let logo = '<i class="iconfont icondefault-header text-success" style="font-size:48px;"></i>';
										if(dashboard[22]){
							         logo = '<img '+group_link+' src="'+thecelohost+'/logos/'+dashboard[20].toLowerCase()+'.jpg" class="rounded-circle" style="border:1px solid #eeeeee;" width="48px" height="48px" />';
							      }
										$("#group_logo").html(logo);
										let name = '<div '+group_link+'>';
										if(dashboard[21] && dashboard[21].trim().length > 0){
											name += '<strong>'+dashboard[21]+'</strong><br/>';
										}
										name += '<span>'+dashboard[20]+'</span></div>';
										$("#group_name").html(name);

										$('#miner_panel').fadeIn(500) ;
									}) ;
								//
								set_lan();
								//["indeterminateText", "textFormat", "startAngle", "clockwise", "animation", "animationDuration", "constrain", "min", "max", "value"]
								//["valueOnCircle", "horizontal", "vertical", "percent", "value", "none"]
								//
							}
							$('#body_content').show();
							$('#footer_about').show();
							$("#Block_Time").html(timer_num+'<small class="text-muted">s</small>');
						}
				})
			});
			//
			$("#Block_Time").html(timer_num+'<small class="text-muted">s</small>');
			timer_num ++;
		}
		//
		var exchange_prices;
		function getPricesData(){
			$.ajax({
					url: thecelohost+'/api/v0.1.js?method=getprices',
					type: 'GET',
					cache: false,
					dataType:'text',
					success:function(data,result){
						var obj = JSON.parse(data);
						//
						var prices_data_rows = [];
						var cGLD_price = 0;
						obj.exchange_prices.forEach(function(element,index){
							cGLD_price = obj.bittrex_prices[index][1];
						  prices_data_rows.push([element[0],element[1],cGLD_price]);
						});
						//
						dataPricesTable = new google.visualization.DataTable();
						dataPricesTable.addColumn('string', 'Time');
						dataPricesTable.addColumn('number', 'Celo');
						dataPricesTable.addColumn('number', 'Bittrex');
						//dataPricesTable.addColumn({type: 'string', role: 'tooltip', p: {html:true}});
						dataPricesTable.addRows(prices_data_rows);

						google.charts.setOnLoadCallback(drawPricesChart);
						//cGLD Price
						$("#cGLD_Price").html('<small class="text-muted">$</small>' + cGLD_price + '<small class="text-muted"></small>');
					}
				})
			}
		//
		var list_li_class = '"list-group-item p-1 border-0 d-flex justify-content-between align-items-center"';
		//
		function getDayPricesData(){
			$.ajax({
					url: thecelohost+'/api/v0.1.js?method=get_week_prices',
					type: 'GET',
					cache: false,
					dataType:'text',
					success:function(data,result){
						var obj = JSON.parse(data);
						//
						var prices_data_rows = [];
						var cGLD_price = 0;
						var change_rate = 0;
						//
						dataPricesTable = new google.visualization.DataTable();
						dataPricesTable.addColumn('string', 'Time');
						dataPricesTable.addColumn('number', 'low');
						dataPricesTable.addColumn('number', 'open');
						dataPricesTable.addColumn('number', 'close');
						dataPricesTable.addColumn('number', 'high');
						dataPricesTable.addColumn({'type': 'string', 'role': 'tooltip', 'p': {'html': true}});
						//
						obj.forEach(function(item,index){
							var open = parseFloat(item.open);
							var close = parseFloat(item.close);
							var high = parseFloat(item.high);
							var low = parseFloat(item.low);
							cGLD_price = close;
							change_rate = ((close-open)*100)/open;

							var tip = '<ul class="list-group p-1 text-secondary"><strong>'+item.startsAt+'</strong>';
							tip += '<li class='+list_li_class+'>Open<span class="text-success">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+open+'</li>';
							tip += '<li class='+list_li_class+'>Close<span class="text-success">'+close+'</li>';
							tip += '<li class='+list_li_class+'>Low <span class="text-success">'+low+'</li>';
							tip += '<li class='+list_li_class+'>High <span class="text-success">'+high+'</li></ul>';

							dataPricesTable.addRow([item.startsAt,low,open,close,high,tip]);
						});
						google.charts.setOnLoadCallback(drawPricesChart);
						//cGLD Price
						var change_rate_color = 'text-success';
						if(change_rate < 0){
							change_rate_color = 'text-danger';
						}
						$("#cGLD_Price").html('<small class="text-muted">$</small>' + cGLD_price + '<small class="'+change_rate_color+'"> ('+(change_rate>0?'+':'')+''+change_rate.toFixed(2)+'% 1W)</small>');
					}
				})
			}
		//
		function getLockedGoldData(){
			$.ajax({
					url: thecelohost+'/api/v0.1.js?method=getlockedgold',
					type: 'GET',
					cache: false,
					dataType:'text',
					success:function(data,result){
						var obj = JSON.parse(data);
						var cgld_total_supply = obj.cgld_total_supply;
						var cusd_total_supply = obj.cusd_total_supply;
						var locked_gold = obj.locked_gold;
						//
						var lockedgold_history = [];
						var pre_lockedgold = 0;
						var locked_rate = 0;
						var pre_votes = 0;
						var votes_rate = 0;
						//
						var supply_history = [];
						var pre_cgld = 0;
						var cgld_rate = 0;
						var pre_cusd = 0;
						var cusd_rate = 0;
						//
						var epochNum = 0;
						Object.keys(locked_gold).forEach((epoch, i) => {
							epochNum = epoch;
							////////////////////////////////////////////
							var lockedgold = locked_gold[epoch].totalLockedGold;
							var votes = locked_gold[epoch].totalVotes;
							locked_rate = ((lockedgold*100)/cgld_total_supply).toFixed(2);
							votes_rate = ((votes*100)/cgld_total_supply).toFixed(2);
							//
							var add = (lockedgold - pre_lockedgold).toFixed(2);
							var addstr = add>=0 ? '+' + add : add;
							var add_votes = (votes - pre_votes).toFixed(2);
							var addstr_votes = add_votes>=0 ? '+' + add_votes : add_votes;
							//
							var tip1 = '<ul class="list-group p-1 text-secondary"><strong>'+rankStr(epoch)+' Epoch</strong>';
							tip1 += '<li class='+list_li_class+'>Votes: <span class="text-success">'+thousands(votes.toFixed(2))+'</li>';
							tip1 += '<li class='+list_li_class+'>VoteRate: <span class="text-success">'+votes_rate+'%</li>';
							tip1 += '<li class='+list_li_class+'><span></span> <span class="text-success">'+addstr_votes+'</li></ul>';
							//
							var tip2 = '<ul class="list-group p-1 text-secondary"><strong>'+rankStr(epoch)+' Epoch</strong>';
							tip2 += '<li class='+list_li_class+'>LockedCELO: <span class="text-success">'+thousands(lockedgold.toFixed(2))+'</li>';
							tip2 += '<li class='+list_li_class+'>LockedRate: <span class="text-success">'+locked_rate+'%</li>';
							tip2 += '<li class='+list_li_class+'><span></span> <span class="text-success">'+addstr+'</li></ul>';
							//
							lockedgold_history.push([rankStr(epoch),votes,tip1,lockedgold,tip2]);
							pre_lockedgold = lockedgold;
							pre_votes = votes;
							////////////////////////////////////////////
							var cgldSupply = locked_gold[epoch].cgldSupply-locked_gold['1'].cgldSupply;
							var cusdSupply = locked_gold[epoch].cusdSupply-locked_gold['1'].cusdSupply;
							//
							supply_history.push([rankStr(epoch),cusdSupply,cgldSupply,'']);
							pre_cgld = cgldSupply;
							pre_cusd = cusdSupply;
						});
						//
						dataTable = new google.visualization.DataTable();
						dataTable.addColumn('string', get_lan('Epoch'));
						dataTable.addColumn('number', get_lan('Votes'));
						dataTable.addColumn({type: 'string', role: 'tooltip', p: {html:true}});
						dataTable.addColumn('number', get_lan('Locked CELO'));
						dataTable.addColumn({type: 'string', role: 'tooltip', p: {html:true}});
						dataTable.addRows(lockedgold_history);
						google.charts.setOnLoadCallback(function(){drawLockedGoldChart(old_dataTable_flg);});
						$("#locked_cGLD").html(thousands(pre_lockedgold.toFixed(0)));
						$("#locked_rate").html(locked_rate + '<small>%</small>');
						$("#votes").html(thousands(pre_votes.toFixed(0)));
						$("#votes_rate").html(votes_rate + '<small>%</small>');
						//
						dataSupplyTable = new google.visualization.DataTable();
						dataSupplyTable.addColumn('string', get_lan('Epoch'));
						dataSupplyTable.addColumn('number', 'cUSD');
						dataSupplyTable.addColumn('number', 'CELO');
						dataSupplyTable.addColumn({type: 'string', role: 'tooltip', p: {html:true}});
						dataSupplyTable.addRows(supply_history);
						google.charts.setOnLoadCallback(function(){drawSupplyChart(old_dataSupplyTable_flg);});
						var release_cgld_rate = ((pre_cgld*100)/locked_gold['1'].cgldSupply).toFixed(4);
						var cusdSupply = locked_gold['1'].cusdSupply==0?pre_cusd:locked_gold['1'].cusdSupply;
						var release_cusd_rate = ((pre_cusd*100)/cusdSupply).toFixed(4);
						$("#release_cgld").html(thousands(pre_cgld.toFixed(0)));
						$("#release_cgld_rate").html(release_cgld_rate + '<small>%</small>');
						$("#release_cusd").html(thousands(pre_cusd.toFixed(0)));
						$("#release_cusd_rate").html(release_cusd_rate + '<small>%</small>');
						//
						let inflation_cgld =  release_cgld_rate*(365/(epochNum-27));
						$("#release_cgld_inflation").html('~'+inflation_cgld.toFixed(2) + '<small>%</small>');
						let inflation_cusd = release_cusd_rate*(365/(epochNum-11));
						$("#release_cusd_inflation").html('~'+inflation_cusd.toFixed(2) + '<small>%</small>');
					}
				})
			}
			//
			function getReserveInformation(){
				$.ajax({
						url: thecelohost+'/api/v0.1.js?method=get_reserve_info',
						type: 'GET',
						cache: false,
						dataType:'text',
						success:function(data,result){
							var obj = JSON.parse(data);
							//
							var celo_info_1 = obj['celo1'];
							var celo_info_2 = obj['celo2'];
							var btc_info = obj['btc'];
							var eth_info = obj['eth'];
							var dai_info = obj['dai'];
							//
							var celo_balance = obj['unfrozenReserveGoldBalance'];//celo_info_2[1];//celo_info_1[1]+celo_info_2[1];
							var celo_usdt = celo_balance * celo_info_2[3];
							var btc_usdt = btc_info[1]*btc_info[2];
							var eth_usdt = eth_info[1]*eth_info[2];
							var dai_usdt = dai_info[1]*dai_info[2];
							var total_usdt = celo_usdt+btc_usdt+eth_usdt+dai_usdt;
							//

							var celo_rate = ((celo_usdt/total_usdt)*100).toFixed(2);

							$("#frozen_celo").html(thousands(obj['frozenReserveGoldBalance'].toFixed(0)));
							$("#unfrozen_celo").html(thousands(obj['unfrozenReserveGoldBalance'].toFixed(0)));

							$("#custody_celo").html(thousands(celo_info_2[1].toFixed(0)));
							$("#unfrozen_celo_1").html(thousands(obj['unfrozenReserveGoldBalance'].toFixed(0)));
							$("#unfrozen_celo_1_rate").html(celo_rate + '<small>% (50%)</small>');
							$("#reserve_celo_addr_1").html(formatAddress(celo_info_1[0],true,false,true));
							$("#reserve_celo_addr_2").html(formatAddress(celo_info_2[0],true,false,true));
							$('#reserve_celo_tooltip').attr('data-original-title','1CELO = '+celo_info_2[3]+'USDT');
							//
							var btc_rate = ((btc_usdt/total_usdt)*100).toFixed(2);
							$("#reserve_btc").html(thousands(btc_info[1].toFixed(0)));
							$("#reserve_btc_rate").html(btc_rate + '<small>% (30%)</small>');
							$("#reserve_btc_addr").html(formatAddress(btc_info[0],true,false,true));
							$('#reserve_btc_tooltip').attr('data-original-title','1BTC = '+parseFloat(btc_info[2]).toFixed(3)+'USDT');
							//
							var eth_rate = ((eth_usdt/total_usdt)*100).toFixed(2);
							$("#reserve_eth").html(thousands(eth_info[1].toFixed(0)));
							$("#reserve_eth_rate").html(eth_rate + '<small>% (15%)</small>');
							$("#reserve_eth_addr").html(formatAddress(eth_info[0],true,false,true));
							$('#reserve_eth_tooltip').attr('data-original-title','1ETH = '+eth_info[2]+'USDT');
							//
							var dai_rate = ((dai_usdt/total_usdt)*100).toFixed(2);
							$("#reserve_dai").html(thousands(dai_info[1].toFixed(0)));
							$("#reserve_dai_rate").html(dai_rate + '<small>% (5%)</small>');
							$("#reserve_dai_addr").html(formatAddress(dai_info[0],true,false,true));
							$('#reserve_dai_tooltip').attr('data-original-title','1DAI = '+dai_info[2]+'USDT');

							//
							reserve_data = [];
							reserve_data.push(['Asset',"Total USD"]);
							reserve_data.push(['CELO ($'+thousands(celo_usdt.toFixed(0))+')',celo_usdt]);
							reserve_data.push(['BTC ($'+thousands(btc_usdt.toFixed(0))+')',btc_usdt]);
							reserve_data.push(['ETH ($'+thousands(eth_usdt.toFixed(0))+')',eth_usdt]);
							reserve_data.push(['DAI ($'+thousands(dai_usdt.toFixed(0))+')',dai_usdt]);
							google.charts.setOnLoadCallback(draw_reserve_chart);
							//
							addressOP("ele_other='group_address'");
						}
					});
			}
			var reserve_data = [];
			function draw_reserve_chart() {
					var element = document.getElementById('chart-reserve-info');
					var data = google.visualization.arrayToDataTable(reserve_data);
					var options = {pieHole: 0.3,
						width: '100%',
						annotations:options_googlechart.annotations,
						fontSize:10,
						legend: {position: 'right',alignment:'center',maxLines: 10,
							textStyle:{"color":options_googlechart.slices[0].color,"fontSize":9}
						},
						slices: options_googlechart.slices,
						backgroundColor:'transparent',
						chartArea:{left:10,right:3,top:10,bottom:10,height:'100%'}
					};
					var chart = new google.visualization.PieChart(element);
					chart.draw(data, options);
			}
			//
			getBlockData();
			if(block_timer)
				clearInterval(block_timer);
			block_timer = setInterval(getBlockData, 1000);
			//
			google.setOnLoadCallback(getDayPricesData);
			//getPricesData();
			google.setOnLoadCallback(getLockedGoldData);
			//
			$("#reserve_info").show();
			getReserveInformation();
			//
			addressOP();
</script>

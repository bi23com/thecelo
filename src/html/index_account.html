	<div class="card shadow-sm mb-4 d-none" style="position:relative;" id="account_panel">
		<div class="row p-3">
				<div class="text-secondary col-md-5">
					<h4 clas="text-success" id='account_name' style="word-break:break-word;">&nbsp;</h4>
					<div><span class="text-success" id='account_address'>&nbsp;</div>
					<ul class="list-group p-3">
						<li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Available CELO"></span><span class="text-success" id='cGLD'/></li>
						<li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Locked CELO"></span><span class="text-success" id='LockedGold'/></li>
						<li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:NonVoting Locked CELO"></span><span class="text-success" id='nonVotingLockedGold'/></li>
						<li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Pending Withdrawals CELO"></span><span class="text-success" id='pendingWithdrawals'/></li>
						<li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Available cUSD"></span><span class="text-success" id='cUSD'/></li>
						<li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Total CELO"></span><span class="text-success" id='Total'/></li>
					</ul>
				</div>
				<div class="col-md-7" id="include_epochbalance"></div>
			</div>
			<div style="position:absolute;top:0;right:0;"><img width="70px" height="70px" id='account_type' class="d-none"/></div>
	</div>

	<div class="card shadow-sm mt-4 p-3 d-none" id="releasegold_panel">
	  <div><strong class="text-secondary">Release Gold contracts</strong></div>
	  <div class="row">
	      <div class="text-secondary col-md-6 p-3">
	        <div>Contract Information</div>
	        <ul class="list-group p-3">
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Beneficiary Address"></span><span class="text-success" id='beneficiary'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Release Owner"></span><span class="text-success" id='releaseOwner'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Refund Address"></span><span class="text-success" id='refundAddress'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:can Validate"></span><span class="text-success" id='canValidate'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:can Vote"></span><span class="text-success" id='canVote'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Liquidity Provision Met"></span><span class="text-success" id='liquidityProvisionMet'/></li>
	        </ul>
	      </div>
	      <div class="text-secondary col-md-6 p-3">
	        <div>Release Schedule</div>
	        <ul class="list-group p-3">
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Release Start"></span><span class="text-success" id='releaseStartTime'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Release Cliff"></span><span class="text-success" id='releaseCliff'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Number of release periods"></span><span class="text-success" id='numReleasePeriods'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Release Period"></span><span class="text-success" id='releasePeriod'/></li>
	          <li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Amount released per period"></span><span class="text-success" id='amountReleasedPerPeriod'/></li>
						<!--
						<li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Current Released Total Amount"></span><span class="text-success" id='currentReleasedTotalAmount'/></li>
						<li class="list-group-item p-1 border-0 d-flex justify-content-between align-items-center"><span set-lan="html:Total Withdrawn"></span><span class="text-success" id='totalWithdrawn'/></li>
						-->
	        </ul>
	      </div>
	    </div>
	</div>

	<div class="mt-4" id="include_account_votes"></div>

	<div class="d-none" id="txs_panel">
		<ul class="nav nav-tabs mt-4" id="myTab" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="Transfer-tab" data-toggle="tab" href="#Transfer" role="tab" aria-controls="Transfer" aria-selected="true">
					<strong class="text-secondary">Transfer</strong></a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="locked-tab" data-toggle="tab" href="#locked" role="tab" aria-controls="locked" aria-selected="false">
					<strong class="text-secondary">Locked</strong></a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="Proposals-tab" data-toggle="tab" href="#Proposals" role="tab" aria-controls="Proposals" aria-selected="false">
					<strong class="text-secondary">Proposals</strong></a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="Exchange-tab" data-toggle="tab" href="#Exchange" role="tab" aria-controls="Exchange" aria-selected="false">
					<strong class="text-secondary">Exchange</strong></a>
			</li>
		</ul>
		<div class="tab-content rounded-bottom border border-top-0 mb-4 shadow-sm" id="myTabContent">
			<div class="tab-pane show active" id="Transfer" role="tabpanel" aria-labelledby="Transfer-tab">
				<div id="include_transfer_logs"></div>
			</div>
			<div class="tab-pane fade" id="locked" role="tabpanel" aria-labelledby="locked-tab">
				<div id="include_locked_logs"></div>
			</div>
			<div class="tab-pane fade" id="Proposals" role="tabpanel" aria-labelledby="Proposals-tab">
				<div id="include_governance_logs"></div>
			</div>
			<div class="tab-pane fade" id="Exchange" role="tabpanel" aria-labelledby="Exchange-tab">
				<div id="include_exchange_logs"></div>
			</div>
		</div>
	</div>
<script type="text/javascript">

	//
	var address = getQueryVariable('address');
	if(address && address.indexOf('0x')===0){
		goto_load();
	}
	else{
		var pathnames = window.location.pathname.split('/');
		if(pathnames.length>2){
			address = pathnames[2];
			if(address&&address.indexOf('0x')===0){
				goto_load();
			}
			else if(address&&address.length>0){
				var url = thecelohost+'/api/?method=find_address&name='+address;
				console.info("url:"+url);
				$.ajax({url:url,type: 'GET',dataType:'text',traditional: true,success:function(data){
					console.info("data:"+data);
					var obj = JSON.parse(data);
					address = obj.address;
					goto_load();
				}
				});
			}
		}
	}
  //
	function goto_load(){
		var randnum = Math.round(Math.random()*10000);
		//
		$("#include_epochbalance").load("/include_epochbalance.html?"+randnum);
		$("#include_account_votes").load("/include_account_votes.html?"+randnum);
		//
		$("#include_transfer_logs").load("/include_transfer_logs.html?"+randnum);
		$('.nav-tabs a').on('shown.bs.tab', function(event){
		  var tab = $(event.target).text().trim();         // active tab
		  var pretab = $(event.relatedTarget).text();  // previous tab
			if(tab=='Transfer')
				$("#include_transfer_logs").load("/include_transfer_logs.html?"+randnum);
			else if(tab=='Proposals')
				$("#include_governance_logs").load("/include_governance_logs.html?"+randnum);
			else if(tab=='Locked')
				$("#include_locked_logs").load("/include_locked_logs.html?"+randnum);
			else if(tab=='Exchange')
				$("#include_exchange_logs").load("/include_exchange_logs.html?"+randnum);
		});
		//
		$(function(){
			var url = thecelohost+'/api/?method=account&address='+address;
			console.info(url)
			$.ajax({
					url:url,
					type: 'GET',
					dataType:'text',
					success:function(data){
						var obj = JSON.parse(data);
						if(obj.type) {$('#account_type').attr('src', '/images/'+obj.type+'.svg');$('#account_type').removeClass('d-none')};
						$('#account_name').html(obj.name);
						$('#account_address').html(formatAddress(address,true,true,true));
						var celo = obj.celo.toFixed(2);
						$('#cGLD').html(thousands(celo));
						var lockedGold = obj.totalLockedGold.toFixed(2);
						$('#LockedGold').html(thousands(lockedGold));
						var nonVotingLockedGold = obj.nonvotingLockedGold.toFixed(2)
						$('#nonVotingLockedGold').html(thousands(nonVotingLockedGold));
						var pendingWithdrawals = obj.pendingWithdrawals.toFixed(2);
						$('#pendingWithdrawals').html(thousands(pendingWithdrawals));
						$('#cUSD').html(thousands(obj.cusd.toFixed(2)));
						$('#Total').html(thousands(parseFloat(celo)+parseFloat(lockedGold)+parseFloat(pendingWithdrawals)));
						/////////////////////
						if(obj.type == 'Releasegold'){
							//
							let isTrue = '<i class="iconfont iconchecked" style="font-size:11px;"></i>'
							let isFalse = '<i class="iconfont iconno" style="font-size:11px;"></i>'
							//
							$('#releasegold_panel').removeClass('d-none')
							let releasegold = obj.releaseGold;
							$('#beneficiary').html(formatAddress(releasegold.beneficiary,true,false,true,false,true));
			        $('#releaseOwner').html(formatAddress(releasegold.releaseOwner,true,false,true,false,true));
			        $('#refundAddress').html(formatAddress(releasegold.refundAddress,true,false,true,false,true));

			        $('#canValidate').html(releasegold.canValidate=='true'?isTrue:isFalse);
			        $('#canVote').html(releasegold.canVote=='true'?isTrue:isFalse);
			        $('#liquidityProvisionMet').html(releasegold.liquidityProvisionMet=='true'?isTrue:isFalse);

							var date = new Date(releasegold.releaseStartTime)
			        let YMDhms = formatDate(date.getTime());
			        $('#releaseStartTime').html(YMDhms[0]+'-'+YMDhms[1]+'-'+YMDhms[2]+' '+YMDhms[3]+':'+YMDhms[4]);
							//$('#releaseStartTime').html(releasegold.releaseStartTime)
							date = new Date(releasegold.releaseCliff)
			        YMDhms = formatDate(date.getTime());
			        $('#releaseCliff').html(YMDhms[0]+'-'+YMDhms[1]+'-'+YMDhms[2]+' '+YMDhms[3]+':'+YMDhms[4]);
							//$('#releaseCliff').html(releasegold.releaseCliff)
			        $('#numReleasePeriods').html(releasegold.numReleasePeriods);
			        $('#releasePeriod').html(releasegold.releasePeriod);
							let amountReleasedPerPeriod = releasegold.amountReleasedPerPeriod.split(/\s+/);//blank or blanks
							amountReleasedPerPeriod = (amountReleasedPerPeriod[0]/1e+18).toFixed(2)
			        $('#amountReleasedPerPeriod').html(thousands(amountReleasedPerPeriod)+' CELO');
							/*
							let currentReleasedTotalAmount = releasegold.currentReleasedTotalAmount.split(/\s+/);//blank or blanks
							currentReleasedTotalAmount = (currentReleasedTotalAmount[0]/1e+18).toFixed(2)
							$('#currentReleasedTotalAmount').html(thousands(currentReleasedTotalAmount)+' CELO');
							let totalWithdrawn = releasegold.totalWithdrawn.split(/\s+/);//blank or blanks
							totalWithdrawn = (totalWithdrawn[0]/1e+18).toFixed(2)
							$('#totalWithdrawn').html(thousands(totalWithdrawn)+' CELO');
							*/

						}
						/////////////////////
						$('#timespan').html('');
						set_lan();
						addressOP();
						$('#account_panel').removeClass('d-none')
						$('#txs_panel').removeClass('d-none')
					}
				});
			});
		}
	//
	$(window).resize(function(){
		google.charts.setOnLoadCallback(drawEpochBalanceChart(old_epochBalanceTable_flg));
		google.charts.setOnLoadCallback(draw_account_voters_chart(old_account_voters_chart));
	});
</script>
